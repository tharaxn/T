<!-- BUILD -->
<!DOCTYPE html>
<head>
  <meta charset="utf-8" />
  <title>Dashboard</title>
  <link rel="stylesheet" type="text/css" href="./output.css" />
  <script
    src="https://cdnjs.cloudflare.com/ajax/libs/paho-mqtt/1.0.2/mqttws31.min.js"
    type="text/javascript"
  ></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.0.1/dist/chart.umd.min.js"></script>
  <script src="../script/pub_sub.js" type="text/javascript"></script>
</head>
<body>
  <div class="flex flex-col p-8 gap-4">
    <!-- MQTT  -->
    <div>
      <h1 id="Main_heading"><b>MQTT Dashboard</b></h1>
      <br />
      <form id="connection-information-form">
        <b>Hostname or IP Address and Port Number:</b>
        <br />

        <input
          id="host"
          name="host"
          type="text"
          placeholder="Broker address"
          class="input input-bordered w-full max-w-xs"
        />

        <input
          id="port"
          name="port"
          type="text"
          placeholder="Port"
          class="input input-bordered w-full max-w-xs"
        />

        <br />
        <b>Subscription topic:</b>
        <br />
        <input
          id="topic_sup"
          name="topic_sup"
          type="text"
          placeholder="Topic"
          class="input input-bordered w-full max-w-xs"
        />
        <br />
        <input
          type="button"
          class="btn btn-accent"
          onclick="startConnect()"
          value="Connect"
        />
        <input
          type="button"
          class="btn btn-accent"
          onclick="startDisconnect()"
          value="Disconnect"
        />
        <br /><b>Publish Topic and Message:</b>
        <br />
        <input
          id="topic_pub"
          name="topic_pub"
          type="text"
          placeholder="Publish topic"
          class="input input-bordered w-full max-w-xs"
        />

        <input
          id="message"
          name="message"
          type="text"
          placeholder="Message"
          class="input input-bordered w-full max-w-xs"
        />
        <br />
        <input
          type="button"
          class="btn btn-accent"
          onclick="publishMessage()"
          value="Publish"
        />
      </form>
      <!-- msg  -->
      <div class="overflow-y-scroll h-64 w-full" id="messages"></div>
      <!-- msg  -->
    </div>
    <!-- MQTT  -->

    <!-- Dashboard -->
    <!-- checkbox -->
    <h1>LED Control</h1>
    <div class="p-4">
      <input
        id="led_switch"
        type="checkbox"
        class="toggle toggle-accent"
        onclick="control_led()"
      />
    </div>
    <!-- checkbox -->
    <!-- card -->
    <div class="space-y-4">
      <div class="flex flex-row space-x-4">
        <div class="card w-52 bg-accent text-primary-content">
          <div class="card-body text-center">
            <h2 class="card-title justify-center">Temperature</h2>
            <h3 id="temp">0</h3>
          </div>
        </div>

        <div class="card w-52 bg-accent text-primary-content px">
          <div class="card-body text-center">
            <h2 class="card-title justify-center">Humidity</h2>
            <h3 id="humid">0</h3>
          </div>
        </div>
      </div>

      <!-- card -->
      <!-- graph -->
      <div class="card w-96 bg-accent text-primary-content px">
        <div class="card-body text-center">
          <h2 class="card-title justify-center">
            Temperature & Humidity Graph
          </h2>
        </div>
      </div>
      <!-- graph -->
    </div>
    <!-- Dashboard -->
  </div>
  <div class="h-auto p-24">

    <canvas id="temp_humid_graph"></canvas>
  </div>
</body>

<script src="../script/chart.js" type="text/javascript"></script>
<script src="../script/graphUpdate.js" type="text/javascript"></script>